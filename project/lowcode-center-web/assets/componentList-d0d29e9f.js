import{d as e,f as a,a as l,q as t,i as n,t as o,C as i,o as s,T as r,F as p,j as u,n as d,w as c,m,l as b,U as v,V as y,W as f,y as h,X as g,H as V,_ as w}from"./index-455b6c01.js";import{g as I}from"./index-6d1bc2c2.js";const L={class:"query_tab"},T={class:"dialog-footer"},C=w(e({...e({name:"accountManageList"}),setup(e){a();let{proxy:w}=V();const C=e=>{W.table.pageSize=e,A()},N=e=>{W.table.currentPage=e,A()},k=()=>{A("search")},_=l({show:!1,data:{},row:null}),x=()=>{w.$router.push({path:"/atomManagement/componentManage/info",query:{}})},z=e=>{w.$router.push({path:"/atomManagement/componentManage/version",query:{id:e.id,name:e.name}})},q=e=>{_.row=e,_.show=!0},M=async()=>{try{y();const e=await f(_.row.id);e.success?(h({type:"success",message:"ÂçáÁ∫ßÊàêÂäü"}),A()):h({type:"error",message:e.message||"Á≥ªÁªüÈîôËØØ"})}catch(e){h({type:"error",message:e.message||"Á≥ªÁªüÈîôËØØ"})}_.row={},_.show=!1,g()},W=l({query:{name:"",roleId:"",emailL:"",nick:"",startAge:"",endAge:"",orgId:"",platform:"",code:"",category:"",isAll:!0,type:""},table:{total:0,pageSize:10,currentPage:1,data:[],columns:[{prop:"thumb",label:"Áº©Áï•Âõæ",minWidth:260,render:(e,a)=>t("div",{className:"__renderComponentInfo__"},[t(n("el-image"),{src:a.thumb,className:"image",style:"width: 60px; height: 60px","zoom-rate":"1.2","max-scale":"7","z-index":"4000","min-scale":"0.2","preview-src-list":[a.thumb],fit:"contain","preview-teleported":"true"},null),t("div",{className:"content"},[t("div",{className:"name"},[t("span",{className:"label"},[o("ÂêçÁß∞Ôºö")]),t("span",{className:"value"},[a.name])]),t("div",{className:"alias"},[t("span",{className:"label"},[o("Âà´ÂêçÔºö")]),t("span",{className:"value"},[a.alias])]),t("div",{className:"alias"},[t("span",{className:"label"},[o("exportÔºö")]),t("span",{className:"value"},[a.exportName])]),t("div",{className:"alias"},[t("span",{className:"label"},[o("componentÔºö")]),t("span",{className:"value"},[a.componentName])])])])},{prop:"materialTypeName",label:"Áâ©ÊñôÁ±ªÂûã",minWidth:120,render:(e,a)=>e},{prop:"category",label:"ÂàÜÁ±ª",minWidth:120,render:(e,a)=>e},{prop:"bizCodeName",label:"‰∏öÂä°ÂΩíÂ±û",minWidth:120,render:(e,a)=>e},{prop:"author",label:"Owner",minWidth:120},{prop:"sceneType",label:"Âú∫ÊôØÁ±ªÂà´",minWidth:100},{prop:"status",label:"Áä∂ÊÄÅ",minWidth:120,render:(e,a)=>{var l,i;return(null==(l=null==a?void 0:a.publishVersionInfo)?void 0:l.version)?(null==(i=null==a?void 0:a.onLineVersionInfo)?void 0:i.version)?1===e?t(n("el-button"),{link:!0,type:"success"},{default:()=>[o("Â∑≤‰∏äÁ∫ø")]}):t(n("el-button"),{link:!0,type:"danger"},0===e?{default:()=>[o("Â∑≤‰∏ãÁ∫ø")]}:{default:()=>[o("ÂºÇÂ∏∏")]}):t(n("el-button"),{link:!0,type:"info"},{default:()=>[o("ÂæÖÂèëÂ∏É")]}):t(n("el-button"),{link:!0,type:"info"},{default:()=>[o("ÊöÇÊó†ÁâàÊú¨")]})}},{prop:"onLineVersionInfoVal",label:"Á∫ø‰∏äÁâàÊú¨",minWidth:100},{prop:"publishVersionInfoVal",label:"ÂèëÂ∏ÉÁâàÊú¨",minWidth:100},{prop:"crateTimeLabel",label:"ÂàõÂª∫Êó∂Èó¥",minWidth:140}],operator:[{show:{key:"operateEditMeta",val:[!0]},text:"ÂÖÉÊï∞ÊçÆ",fun:e=>{w.$router.push({path:"/atomManagement/componentManage/info",query:{id:e.id,name:e.name}})}},{render:()=>t(n("el-tooltip"),{className:"box-item",effect:"dark",content:"ÂçáÁ¥ö",placement:"top-start"},{default:()=>[o("ÂçáÁ¥öüöÄ")]}),show:{key:"operateUpdate",val:[!0]},fun:q},{render:()=>t(n("el-tooltip"),{className:"box-item",effect:"dark",content:"ÂçáÁ¥ö",placement:"top-start"},{default:()=>[o("ÂèëÂ∏ÉüöÄ")]}),show:{key:"publishFirstUpdate",val:[!0]},fun:q},{text:"ÁâàÊú¨Êó•Âøó",show:{key:"operateVersionListDetail",val:[!0]},fun:z},{text:"‰∏ãÁ∫ø",show:{key:"operateOffLine",val:[!0]},fun:e=>{}},{text:"Âà†Èô§",show:{key:"operateDelete",val:[!0]},fun:z}],operatorConfig:{fixed:"right",align:"center",width:"220",label:"Êìç‰Ωú"}},listTypeInfo:{sceneTypeList:[{dictLabel:"PC",dictValue:"pc"},{dictLabel:"H5",dictValue:"h5"}],categoryList:[],materialType:[],componentBizCode:[]}}),P=i((()=>({name:{label:"ÂêçÁß∞",comp:"el-input"},id:{label:"ID",comp:"el-input"},alias:{label:"Âà´Âêç",comp:"el-input"},bizCode:{label:"‰∏öÂä°ÁºñÁ†Å",comp:"el-input"},sceneType:{label:"‰∏öÂä°Âú∫ÊôØ",comp:"el-select",changeEvent:"change",type:"select-arr",arrLabel:"label",arrKey:"value",list:"sceneTypeList",listTypeInfo:W.listTypeInfo},category:{label:"ÁªÑ‰ª∂Á±ªÂà´",comp:"el-select",arrLabel:"label",arrKey:"value",changeEvent:"change",type:"select-arr",list:"categoryList",listTypeInfo:W.listTypeInfo},type:{label:"Áâ©ÊñôÁ±ªÂûã",comp:"el-select",arrLabel:"label",arrKey:"value",changeEvent:"change",type:"select-arr",list:"materialType",listTypeInfo:W.listTypeInfo}}))),D=i((()=>{const e={};return(W.listTypeInfo.materialType||[]).forEach((a=>{e[a.value]=a})),e})),E=i((()=>{const e={};return(W.listTypeInfo.componentBizCode||[]).forEach((a=>{e[a.value]=a})),e})),S=e=>{W.query={...W.query,...e},A("search")};s((async()=>{await U(),await A()}));const U=async()=>{const e=await I("material");if(e.success){const{materialBizConfig:a=[],materialCategoryConfig:l=[],materialSceneConfig:t=[],materialTypeConfig:n=[]}=e.data||{};W.listTypeInfo.sceneTypeList=(t||[]).map((e=>({key:e.value,...e}))),W.listTypeInfo.categoryList=(l||[]).map((e=>({key:e.value,...e}))),W.listTypeInfo.materialType=(n||[]).map((e=>({key:e.value,...e}))),W.listTypeInfo.componentBizCode=(a||[]).map((e=>({key:e.value,...e})))}},A=async e=>{"search"==e&&(W.table.currentPage=1);const a=await r({...W.query,page:W.table.currentPage,pageSize:W.table.pageSize,name:W.query.name});W.table.total=a.data&&a.data.count||0,W.table.data=a.data&&a.data.data?a.data.data:[],W.table.data.forEach((e=>{var a,l,t,n,o,i,s,r,u,d,c,m,b,v,y,f;e.onLineVersionInfoVal=(null==(a=null==e?void 0:e.onLineVersionInfo)?void 0:a.version)||"--",e.publishVersionInfoVal=(null==(l=null==e?void 0:e.publishVersionInfo)?void 0:l.version)||"--",e.statusLabel=1===e.status?"Ê≠£Â∏∏":"Â∑≤‰∏ãÁ∫ø",e.materialTypeName=(null==(n=null==(t=null==D?void 0:D.value)?void 0:t[e.type])?void 0:n.label)||"--",e.bizCodeName=(null==(i=null==(o=null==E?void 0:E.value)?void 0:o[e.bizCode])?void 0:i.label)||"--",e.allowVersion=(null==(s=null==e?void 0:e.onLineVersionInfo)?void 0:s.version)!==(null==(r=null==e?void 0:e.publishVersionInfo)?void 0:r.version)&&(null==(u=null==e?void 0:e.onLineVersionInfo)?void 0:u.version)&&(null==(d=null==e?void 0:e.publishVersionInfo)?void 0:d.version)?1:0,e.allowPuiblishFirstVersion=!(null==e?void 0:e.onLineVersion)&&!!(null==e?void 0:e.publishVersion),e.crateTimeLabel=p(e.crateTime).format("YYYY-MM-DD HH:mm"),e.operateDelete=!0===(null==(c=null==e?void 0:e.operate)?void 0:c.delete),e.operateEditMeta=!0===(null==(m=null==e?void 0:e.operate)?void 0:m.editMeta),e.operateOffLine=!0===(null==(b=null==e?void 0:e.operate)?void 0:b.offLine),e.operateUpdate=!0===(null==(v=null==e?void 0:e.operate)?void 0:v.update)&&1===e.allowVersion,e.publishFirstUpdate=!0===(null==(y=null==e?void 0:e.operate)?void 0:y.update)&&e.allowPuiblishFirstVersion,e.operateVersionListDetail=!0===(null==(f=null==e?void 0:e.operate)?void 0:f.versionListDetail)}));const l=Math.ceil(W.table.total/W.table.pageSize);return l<W.table.currentPage&&0!==W.table.total?(W.table.currentPage=l,A()):0===W.table.total&&(W.table.currentPage=1),!1};return(e,a)=>{const l=n("t-query-condition"),i=n("t-layout-page-item"),s=n("el-button"),r=n("el-radio-button"),p=n("el-radio-group"),y=n("t-table"),f=n("el-dialog"),h=n("t-layout-page");return u(),d(h,{class:"menu_mange"},{default:c((()=>[t(i,null,{default:c((()=>[t(l,{opts:P.value,onSubmit:S},null,8,["opts"])])),_:1}),t(i,null,{default:c((()=>[t(y,{table:m(W).table,columns:m(W).table.columns,onSizeChange:C,onPageChange:N},{toolbar:c((()=>[t(s,{type:"primary",onClick:x},{default:c((()=>a[3]||(a[3]=[o("ÂàõÂª∫Êñ∞ÁªÑ‰ª∂")]))),_:1})])),title:c((()=>[b("div",L,[t(p,{modelValue:m(W).query.isAll,"onUpdate:modelValue":a[0]||(a[0]=e=>m(W).query.isAll=e),onChange:k},{default:c((()=>[t(r,{label:!0},{default:c((()=>a[4]||(a[4]=[o("ÂÖ®ÈÉ®")]))),_:1}),t(r,{label:!1},{default:c((()=>a[5]||(a[5]=[o("ÊàëÁöÑ")]))),_:1})])),_:1},8,["modelValue"])])])),_:1},8,["table","columns"])])),_:1}),t(f,{modelValue:m(_).show,"onUpdate:modelValue":a[2]||(a[2]=e=>m(_).show=e),title:"Warning",width:"500px","align-center":""},{footer:c((()=>[b("div",T,[t(s,{onClick:a[1]||(a[1]=e=>m(_).show=!1)},{default:c((()=>a[6]||(a[6]=[o("Cancel")]))),_:1}),t(s,{type:"primary",onClick:M},{default:c((()=>a[7]||(a[7]=[o(" Confirm ")]))),_:1})])])),default:c((()=>[a[8]||(a[8]=b("span",null,v("Á°ÆËÆ§ÂçáÁ∫ßÁªÑ‰ª∂Âà∞ÊúÄÊñ∞ÁâàÊú¨"),-1))])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-3c7b4471"]]);export{C as default};
