import{d as e,f as a,a as t,o as l,an as s,F as o,i as d,j as r,n as c,w as u,q as i,l as n,t as y,m as w,B as p,ao as f,y as m,ap as _,aq as h,_ as b}from"./index-455b6c01.js";const k={style:{cursor:"pointer"}},K={class:"appendCreateAccess"},C={class:"dialog-footer"},V=b(e({...e({name:"MyAccessList"}),setup(e){a();const b=async e=>{try{await f(g.row.id);m.success("操作成功")}catch(a){m.error("操作失败")}x(),g.show=!1,g.row=null},V=t({query:{},table:{data:[]}}),g=t({show:!1,row:null});l((()=>{x()}));const x=async e=>{const a=await s();V.table.data=a.data&&a.data?a.data:[],V.table.data.forEach((e=>{e.crateTimeLabel=o(e.crateTime).format("YYYY-MM-DD HH:mm")}))},v=async()=>{try{(await h()).success?(m.success("创建成功"),x()):m.error("操作失败，请联系客服")}catch(e){m.error("操作失败，请联系客服")}};return(e,a)=>{const t=d("t-layout-page-item"),l=d("el-table-column"),s=d("el-input"),o=d("el-form-item"),f=d("View"),h=d("el-icon"),S=d("Hide"),A=d("el-form"),U=d("el-tag"),Y=d("el-button"),q=d("Plus"),H=d("el-table"),L=d("el-dialog"),M=d("t-layout-page");return r(),c(M,{class:"menu_mange"},{default:u((()=>[i(t,null,{default:u((()=>a[2]||(a[2]=[n("div",null,[y(" 一个账号最多拥有两对密钥(Access/Secret Key)；更换密钥时，请创建第二个密钥；删除密钥前须停用；出于安全考虑，建议您周期性地更换密钥。 "),n("br")],-1)]))),_:1}),i(t,null,{default:u((()=>[i(H,{data:w(V).table.data,stripe:"",style:{width:"100%"}},{append:u((()=>[n("div",K,[i(Y,{type:"primary",onClick:v},{default:u((()=>[i(h,null,{default:u((()=>[i(q)])),_:1}),a[7]||(a[7]=y("新增"))])),_:1})])])),default:u((()=>[i(l,{prop:"crateTimeLabel",label:"创建时间",width:"340"}),i(l,{label:"AccessKey/SecretKey"},{default:u((e=>[i(A,{"label-position":"right","label-width":"auto",model:e.row,style:{"max-width":"600px"}},{default:u((()=>[i(o,{label:"AccessKey"},{default:u((()=>[i(s,{modelValue:e.row.accessKey,"onUpdate:modelValue":a=>e.row.accessKey=a,readonly:"",style:{width:"340px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),i(o,{label:"SecretKey"},{default:u((()=>[i(s,{modelValue:e.row.secretKey,"onUpdate:modelValue":a=>e.row.secretKey=a,readonly:"",type:e.row.showSecretKey?"text":"password",style:{width:"340px"}},{suffix:u((()=>[n("div",k,[e.row.showSecretKey?(r(),c(h,{key:0,onClick:()=>{e.row.showSecretKey=!1}},{default:u((()=>[i(f)])),_:2},1032,["onClick"])):(r(),c(h,{key:1,onClick:()=>{e.row.showSecretKey=!0}},{default:u((()=>[i(S)])),_:2},1032,["onClick"]))])])),_:2},1032,["modelValue","onUpdate:modelValue","type"])])),_:2},1024)])),_:2},1032,["model"])])),_:1}),i(l,{prop:"address",label:"状态",width:"180"},{default:u((e=>[1===e.row.status?(r(),c(U,{key:0,type:"success"},{default:u((()=>a[3]||(a[3]=[y("生效中")]))),_:1})):(r(),c(U,{key:1,type:"danger"},{default:u((()=>a[4]||(a[4]=[y("已停用")]))),_:1}))])),_:1}),i(l,{label:"操作",width:"240"},{default:u((e=>[n("div",null,[i(Y,{type:"danger",onClick:a=>{return t=e.row,g.show=!0,void(g.row=t);var t},disabled:w(V).table.data.length<=1||0===e.row.status},{default:u((()=>a[5]||(a[5]=[y("停用")]))),_:2},1032,["onClick","disabled"]),0===e.row.status?(r(),c(Y,{key:0,onClick:a=>(async e=>{try{await _(e.id),m.success("操作成功")}catch(a){m.error("操作失败")}x()})(e.row),type:"danger"},{default:u((()=>a[6]||(a[6]=[y("删除")]))),_:2},1032,["onClick"])):p("",!0)])])),_:1})])),_:1},8,["data"]),i(L,{modelValue:w(g).show,"onUpdate:modelValue":a[1]||(a[1]=e=>w(g).show=e),title:"您确定禁用此密钥吗？",width:"500px"},{footer:u((()=>[n("div",C,[i(Y,{onClick:a[0]||(a[0]=e=>w(g).show=!1)},{default:u((()=>a[8]||(a[8]=[y("取消")]))),_:1}),i(Y,{type:"primary",onClick:b},{default:u((()=>a[9]||(a[9]=[y(" 确认 ")]))),_:1})])])),default:u((()=>[a[10]||(a[10]=n("span",null,"禁用前请确认该密钥没有被使用。",-1))])),_:1},8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-6350d79f"]]);export{V as default};
