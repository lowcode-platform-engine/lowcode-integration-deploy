import{d as e,u as a,f as t,r as s,o,A as n,K as i,i as c,j as r,k as d,m as l,q as u,B as w,_ as m}from"./index-455b6c01.js";const _={class:"content"},p={key:0},v=m(e({__name:"oauth-result",setup(e){const m=a();t();const{params:v,query:f}=m,I=s();return o((async()=>{if(f.code)try{const e=await n(f.code,f);if(e.success){const a=e.data;window.localStorage.setItem(i.platformTokenKey,a.token.access_token);const{redirect_uri:t}=f,s=t||`${window.location.origin}${window.location.pathname}#/index`;f.deviceId&&f.state&&window.sessionStorage.setItem(`CLIENT_AUTH_SUCCESS::${f.deviceId}::${f.state}`,"true"),window.location.replace(s),window.location.reload()}else I.value=e.message||e.data}catch(e){I.value=e}})),(e,a)=>{const t=c("el-result");return r(),d("div",_,[l(I)?(r(),d("div",p,[u(t,{icon:"error",title:`${l(I)||"登录失败"}`,"sub-title":"请刷新页面重试"},null,8,["title"])])):w("",!0)])}}}),[["__scopeId","data-v-e16ab7e8"]]);export{v as default};
