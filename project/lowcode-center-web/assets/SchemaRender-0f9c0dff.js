import{l as e}from"./loader-421e4912.js";import{d as n,r as t,o as a,j as o,k as l,aH as c,_ as r}from"./index-455b6c01.js";const s={React:"https://cdn.jsdelivr.net/npm/react@18.3.1/umd/react.production.min.js",ReactDOM:"https://cdn.jsdelivr.net/npm/react-dom@18.3.1/umd/react-dom.production.min.js",LowcodeXRenderReactRenderSdk:"https://cdn.jsdelivr.net/npm/@lowcode-set-up-platform/lowcode-x-render-react-render-sdk@1.0.0/lib/index.umd.js"};async function d(n){return new Promise((async(t,a)=>{var o,l,c;try{const{target:a,config:c,onError:r,onMessage:d,onFormMounted:i}=n;await(null==(o=null==n?void 0:n.beforeMounted)?void 0:o.call(n));const u=document.createElement("iframe");u.style.width="100%",u.style.height="100%",u.style.border="none",a.appendChild(u);const m=u.contentWindow,y=u.contentDocument;await async function(n=window){return e(s,n)}(m),((e,n=window)=>{const t=n.document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(n.document.createTextNode(e)),n.document.head.appendChild(t)})("\nhtml::-webkit-scrollbar,\nbody::-webkit-scrollbar {\n    width: 5px;\n    height: 5px;\n}\nhtml::-webkit-scrollbar-track,\nbody::-webkit-scrollbar-track {\n    box-shadow: inset 0 0 0px rgba(240, 240, 240, 0.5);\n    border-radius: 10px;\n    background-color: rgba(50, 50, 50, 0.1);\n}\nhtml::-webkit-scrollbar-thumb,\nbody::-webkit-scrollbar-thumb {\n    border-radius: 10px;\n    box-shadow: inset 0 0 0px rgba(240, 240, 240, 0.5);\n    background-color: rgba(50, 50, 50, 0.3);\n}",m);const p=y.createElement("div");p.id="example",y.body.appendChild(p);const h=e=>{if(e.source!==m)return;const{type:n,payload:t}=e.data;null==d||d({type:n,payload:t})};window.addEventListener("message",h);let v=()=>null;(()=>{const{ReactDOM:e,React:n,LowcodeXRenderReactRenderSdk:t}=m;e.createRoot(p).render(n.createElement((()=>{const e=t.useForm();return n.createElement(t.FormRender,{form:e,onMount:()=>{v=()=>e,null==i||i(v)},...c})})))})(),await(null==(l=null==n?void 0:n.afterMounted)?void 0:l.call(n));return t({sendMessage:e=>{m.postMessage(e,"*")},formInstance:v})}catch(r){await(null==(c=null==n?void 0:n.onError)?void 0:c.call(n,r))}}))}const i=r(n({...n({name:"SchemaRender"}),props:{schema:{type:Object,default:()=>{}},style:{type:Object,default:()=>{}}},emits:["mounted"],setup(e,{expose:n,emit:r}){const s=t(null),i=t((()=>null)),u=e;n({reset:async()=>new Promise((async(e,n)=>{var t,a;try{const n=null==(t=i.value)?void 0:t.call(i);e(await(null==(a=n.resetFields)?void 0:a.call(n)))}catch(o){n(o)}})),save:async()=>new Promise((async(e,n)=>{var t,a;try{const n=null==(t=i.value)?void 0:t.call(i);e(await(null==(a=n.validateFields)?void 0:a.call(n)))}catch(o){n(o)}})),setSchema:async e=>new Promise((async(n,t)=>{var a,o;try{const t=null==(a=i.value)?void 0:a.call(i);n(await(null==(o=t.setSchema)?void 0:o.call(t,e,!0)))}catch(l){t(l)}})),setValues:async e=>new Promise((async(n,t)=>{var a,o;try{const t=null==(a=i.value)?void 0:a.call(i);n(await(null==(o=t.setValues)?void 0:o.call(t,e)))}catch(l){t(l)}})),getSchema:async e=>new Promise((async(n,t)=>{var a,o;try{const t=null==(a=i.value)?void 0:a.call(i);n(await(null==(o=t.getSchema)?void 0:o.call(t,e)))}catch(l){t(l)}}))});const m=r;return a((async()=>{d({config:{schema:u.schema,onFinish:function(e){},footer:!1},target:s.value,onMessage:e=>{},beforeMounted:async function(){},afterMounted:async function(){},onError:async function(e){},onFormMounted:e=>{i.value=e,m("mounted",e)}}).then((e=>{i.value=e.formInstance}))})),(e,n)=>(o(),l("div",{class:"contentContainer",ref_key:"formRefContainer",ref:s,style:c(u.style||{})},null,4))}}),[["__scopeId","data-v-51b9d682"]]);export{i as S};
